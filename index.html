<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Melinda Higgins">
<meta name="dcterms.date" content="2023-02-23">

<title>Working with Text in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="index_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="index_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="index_files/libs/datatables-binding-0.23/datatables.js"></script>
<script src="index_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="index_files/libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="index_files/libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="index_files/libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="index_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="index_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#split-text-into-separate-columns" id="toc-split-text-into-separate-columns" class="nav-link active" data-scroll-target="#split-text-into-separate-columns">1. Split text into separate columns</a>
  <ul class="collapse">
  <li><a href="#example-1-make-and-model-of-cars-in-mtcars-dataset" id="toc-example-1-make-and-model-of-cars-in-mtcars-dataset" class="nav-link" data-scroll-target="#example-1-make-and-model-of-cars-in-mtcars-dataset">Example 1: Make and Model of Cars in <code>mtcars</code> dataset</a></li>
  <li><a href="#example-2-extracting-data-from-filenames" id="toc-example-2-extracting-data-from-filenames" class="nav-link" data-scroll-target="#example-2-extracting-data-from-filenames">Example 2: Extracting “Data” from filenames</a></li>
  <li><a href="#note-updated-tidyr-functions" id="toc-note-updated-tidyr-functions" class="nav-link" data-scroll-target="#note-updated-tidyr-functions">NOTE: Updated <code>tidyr</code> functions</a></li>
  </ul></li>
  <li><a href="#parsing-multiple-columns-of-text-into-categories" id="toc-parsing-multiple-columns-of-text-into-categories" class="nav-link" data-scroll-target="#parsing-multiple-columns-of-text-into-categories">2. Parsing multiple columns of text into categories</a>
  <ul class="collapse">
  <li><a href="#example-1-parsing-a-list-of-courses-into-categories" id="toc-example-1-parsing-a-list-of-courses-into-categories" class="nav-link" data-scroll-target="#example-1-parsing-a-list-of-courses-into-categories">Example 1: Parsing a list of courses into categories</a>
  <ul class="collapse">
  <li><a href="#explaining-the-code-below" id="toc-explaining-the-code-below" class="nav-link" data-scroll-target="#explaining-the-code-below">Explaining the code below</a></li>
  <li><a href="#rest-of-code-to-parse-rest-of-list-for-english-and-statistics" id="toc-rest-of-code-to-parse-rest-of-list-for-english-and-statistics" class="nav-link" data-scroll-target="#rest-of-code-to-parse-rest-of-list-for-english-and-statistics">Rest of code to parse rest of list for “English” and “Statistics”</a></li>
  <li><a href="#what-about-wellness-versus-nutrition-and-wellness" id="toc-what-about-wellness-versus-nutrition-and-wellness" class="nav-link" data-scroll-target="#what-about-wellness-versus-nutrition-and-wellness">What about “Wellness” versus “Nutrition and Wellness”?</a></li>
  <li><a href="#table-of-frequencies-of-course-categories" id="toc-table-of-frequencies-of-course-categories" class="nav-link" data-scroll-target="#table-of-frequencies-of-course-categories">Table of Frequencies of Course Categories</a></li>
  </ul></li>
  <li><a href="#example-2-parsing-a-list-of-medications-into-treatment-classes" id="toc-example-2-parsing-a-list-of-medications-into-treatment-classes" class="nav-link" data-scroll-target="#example-2-parsing-a-list-of-medications-into-treatment-classes">Example 2: Parsing a list of medications into treatment classes</a>
  <ul class="collapse">
  <li><a href="#look-at-results---who-is-on-these-3-medications" id="toc-look-at-results---who-is-on-these-3-medications" class="nav-link" data-scroll-target="#look-at-results---who-is-on-these-3-medications">Look at results - who is on these 3 medications:</a></li>
  <li><a href="#pull-a-list-of-subject-ids-on-certain-medications-or-combinations-of-meds" id="toc-pull-a-list-of-subject-ids-on-certain-medications-or-combinations-of-meds" class="nav-link" data-scroll-target="#pull-a-list-of-subject-ids-on-certain-medications-or-combinations-of-meds">Pull a list of subject IDs on certain medications or combinations of meds</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources">Additional Resources:</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Working with Text in R</h1>
<p class="subtitle lead">Text-to-Columns; Search Across Columns; Parse FREE OPEN Text</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Melinda Higgins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 23, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<hr>
<section id="split-text-into-separate-columns" class="level1">
<h1>1. Split text into separate columns</h1>
<p>There is a function in EXCEL under the “DATA” tab for “test-to-columns” allowing you to designate a “delimiter” for splitting text chunks into separate columns. There is a similar function in the <code>tidyr</code> package, <code>separate()</code>. Let’s see an example of how this works.</p>
<section id="example-1-make-and-model-of-cars-in-mtcars-dataset" class="level2">
<h2 class="anchored" data-anchor-id="example-1-make-and-model-of-cars-in-mtcars-dataset">Example 1: Make and Model of Cars in <code>mtcars</code> dataset</h2>
<p>Let’s take a look at the builtin <code>mtcars</code> dataset. This dataset has “row names” for each car’s make and model. Here is an example of the top 6 rows of the <code>mtcars</code> dataset:</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb1" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view top 6 rows of mtcars dataset</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Top 6 rows of mtcars dataset"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Top 6 rows of mtcars dataset</caption>
<colgroup>
<col style="width: 26%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
<th style="text-align: right;">carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Row names of the <code>mtcars</code> dataset.</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb2" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># see the list of the row names</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code> [1] "Mazda RX4"           "Mazda RX4 Wag"       "Datsun 710"         
 [4] "Hornet 4 Drive"      "Hornet Sportabout"   "Valiant"            
 [7] "Duster 360"          "Merc 240D"           "Merc 230"           
[10] "Merc 280"            "Merc 280C"           "Merc 450SE"         
[13] "Merc 450SL"          "Merc 450SLC"         "Cadillac Fleetwood" 
[16] "Lincoln Continental" "Chrysler Imperial"   "Fiat 128"           
[19] "Honda Civic"         "Toyota Corolla"      "Toyota Corona"      
[22] "Dodge Challenger"    "AMC Javelin"         "Camaro Z28"         
[25] "Pontiac Firebird"    "Fiat X1-9"           "Porsche 914-2"      
[28] "Lotus Europa"        "Ford Pantera L"      "Ferrari Dino"       
[31] "Maserati Bora"       "Volvo 142E"         </code></pre>
</div>
</div>
<p>Let’s add these text “strings” for the names of the cars to the dataset in a new column called <code>makemodel</code>:</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb4" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>makemodel <span class="ot">&lt;-</span> <span class="fu">row.names</span>(mtcars)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>mtcars2 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">makemodel =</span> makemodel)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># view top 6 rows again</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>mtcars2 <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Top 6 rows of mtcars dataset"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Top 6 rows of mtcars dataset</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
<th style="text-align: right;">carb</th>
<th style="text-align: left;">makemodel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Mazda RX4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Mazda RX4 Wag</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Datsun 710</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Hornet 4 Drive</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Hornet Sportabout</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Valiant</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Suppose we now want to break up the make and model into separate columns using the space as our column divider. We can use the <code>separate()</code> function from <code>tidyr</code> package to do this. Note: given the full list of makes and models some have 2 spaces so you’ll end up with 3 columns that we’ll call “make”, “model” and “type” which is why <code>into = c("make", "model", "type")</code> in the code below. This defines the new columns we are adding to the dataset.</p>
<p>The options below are as follows:</p>
<ul>
<li><code>data</code> = name of data frame</li>
<li><code>col</code> = column you want to separate apart (in this case, character)</li>
<li><code>sep</code> = character expression to match for separating</li>
<li><code>into</code> = the list of new column variables you want to create</li>
<li><code>remove</code> = whether you want to keep or remove the rest of the variables in the data frame.</li>
</ul>
<p><em>Numeric variables can also be separated, see more details in the help manual for <code>tidyr::separate()</code>.</em></p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb5" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> mtcars2,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> makemodel,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"make"</span>, <span class="st">"model"</span>, <span class="st">"type"</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Top 6 Rows of mtcars"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Top 6 Rows of mtcars</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
<th style="text-align: right;">carb</th>
<th style="text-align: left;">makemodel</th>
<th style="text-align: left;">make</th>
<th style="text-align: left;">model</th>
<th style="text-align: left;">type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: left;">Mazda</td>
<td style="text-align: left;">RX4</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: left;">Mazda</td>
<td style="text-align: left;">RX4</td>
<td style="text-align: left;">Wag</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: left;">Datsun</td>
<td style="text-align: left;">710</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: left;">Hornet</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">Drive</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: left;">Hornet</td>
<td style="text-align: left;">Sportabout</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Valiant</td>
<td style="text-align: left;">Valiant</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="example-2-extracting-data-from-filenames" class="level2">
<h2 class="anchored" data-anchor-id="example-2-extracting-data-from-filenames">Example 2: Extracting “Data” from filenames</h2>
<p>Here is a small hypothetical dataset from a lab that created custom IDs to track the subject, visit number and year by combining them into one long “string” (text field) separated by underscores “_“. This is the variable <code>idlong</code> in the <code>labdata</code> dataset (created in code below).</p>
<p>Using the code example above, here is another application of the <code>tifyr::separate()</code> function to separate the long string <code>idlong</code> into 3 new columns added to the <code>labdata</code> dataset individually for “ID”, “visit” and “year”.</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb6" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create hypothetical dataset</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>idlong <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"001_v1_2020"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"001_v2_2021"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"002_v1_2020"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"002_v2_2021"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"003_v1_2020"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"003_v2_2021"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"004_v1_2021"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"004_v2_2022"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"005_v1_2021"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"005_v2_2022"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">31</span>, <span class="dv">28</span>, <span class="dv">26</span>, <span class="dv">34</span>, <span class="dv">34</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">30</span>, <span class="dv">25</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>labdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(idlong, values)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>labdata <span class="sc">%&gt;%</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Hypothetical Dataset With Long filenames"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Hypothetical Dataset With Long filenames</caption>
<thead>
<tr class="header">
<th style="text-align: left;">idlong</th>
<th style="text-align: right;">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">001_v1_2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">001_v2_2021</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">002_v1_2020</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">002_v2_2021</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">003_v1_2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">003_v2_2021</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">004_v1_2021</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">004_v2_2022</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">005_v1_2021</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">005_v2_2022</td>
<td style="text-align: right;">25</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Create 3 new variables “ID”, “Visit” and “Year” from <code>idlong</code>.</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb7" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> labdata,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> idlong,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"visit"</span>, <span class="st">"year"</span>),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Three new variables added: ID, Visit, Year - extracted from idlong"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Three new variables added: ID, Visit, Year - extracted from idlong</caption>
<thead>
<tr class="header">
<th style="text-align: left;">idlong</th>
<th style="text-align: left;">ID</th>
<th style="text-align: left;">visit</th>
<th style="text-align: left;">year</th>
<th style="text-align: right;">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">001_v1_2020</td>
<td style="text-align: left;">001</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">001_v2_2021</td>
<td style="text-align: left;">001</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">002_v1_2020</td>
<td style="text-align: left;">002</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">002_v2_2021</td>
<td style="text-align: left;">002</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">003_v1_2020</td>
<td style="text-align: left;">003</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">003_v2_2021</td>
<td style="text-align: left;">003</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">004_v1_2021</td>
<td style="text-align: left;">004</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">004_v2_2022</td>
<td style="text-align: left;">004</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2022</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">005_v1_2021</td>
<td style="text-align: left;">005</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">005_v2_2022</td>
<td style="text-align: left;">005</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2022</td>
<td style="text-align: right;">25</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="note-updated-tidyr-functions" class="level2">
<h2 class="anchored" data-anchor-id="note-updated-tidyr-functions">NOTE: Updated <code>tidyr</code> functions</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<strong>IMPORTANT NOTE</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p><img src="lifecycle-superseded.svg" class="img-fluid" alt="superceded"> The function <code>tidyr::separate()</code> has been now been “superseded” by several functions for “separate” actions, see warning at <a href="https://tidyr.tidyverse.org/reference/separate.html" target="_blank">https://tidyr.tidyverse.org/reference/separate.html</a> and the updated list of cuntions at <a href="https://tidyr.tidyverse.org/reference/index.html#character-vectors" target="_blank">https://tidyr.tidyverse.org/reference/index.html#character-vectors</a>.</p>
</div>
</div>
<p>Here is the code above updated with the newer <code>tidyr::separate_wider_delim()</code> function as of <code>tidyr</code> v.1.3.0.</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb8" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>labdata <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> idlong, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">"_"</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"visit"</span>, <span class="st">"year"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Labdata Filenames Separated into ID, Visit and Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Labdata Filenames Separated into ID, Visit and Year</caption>
<thead>
<tr class="header">
<th style="text-align: left;">ID</th>
<th style="text-align: left;">visit</th>
<th style="text-align: left;">year</th>
<th style="text-align: right;">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">001</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">001</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">002</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">002</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">003</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2020</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">003</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">004</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">004</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2022</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">005</td>
<td style="text-align: left;">v1</td>
<td style="text-align: left;">2021</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">005</td>
<td style="text-align: left;">v2</td>
<td style="text-align: left;">2022</td>
<td style="text-align: right;">25</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
</section>
<section id="parsing-multiple-columns-of-text-into-categories" class="level1">
<h1>2. Parsing multiple columns of text into categories</h1>
<section id="example-1-parsing-a-list-of-courses-into-categories" class="level2">
<h2 class="anchored" data-anchor-id="example-1-parsing-a-list-of-courses-into-categories">Example 1: Parsing a list of courses into categories</h2>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb9" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in dataset</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"school_courses.csv"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># view dataset in browser with DT package</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># adds scroll bars and "next" page tabbing</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(school_courses, <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pageLength =</span> <span class="dv">5</span>, <span class="at">autoWidth =</span> <span class="cn">TRUE</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-d6d7ba608e7f44c751cc" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d6d7ba608e7f44c751cc">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],[1,2,3,4,5,6,7,8,9,10],["General Chemistry I &amp; II","Microbiology","Life Sciences (Microbiology, Immunology, Cell &amp; Molecular Biology, Molecular Genetics)","Anatomy and Physiology for Nursing I &amp; II","General Chemistry or Principles of Chemistry","English","Chemistry","English","Microbiology for Health Professionals with Virtual Lab","Introductory Sociology"],["Human Biology: Health Professions","General Chemistry (general or higher)","Chemistry\nBiochemistry","Introduction to Psychology","General Biology","Psychology","English Composition","Anatomy &amp; Physiology","General Chemistry","Introductory Psychology"],["Principles of Human Anatomy","Sociology","Psychology","Chemistry for Health Professionals","First Year Writing","Sociology","Social Studies","Microbiology","Developmental Psychology","Human Physiology"],["Fundamentals of Human Physiology","Psychology","Quantitative Reasoning","Composition and Communication I &amp; II","Lifespan Development or Human Growth &amp; Development","Human Growth and Development","Science with lab\n(including Chemistry)","History or Government, or Psychology, or Sociology, Economics, Anthropology, Political Science","Humanities/Social Sciences","English Composition"],["Microbiology for Human Health","Human Anatomy and Physiology I &amp; II","Communication Studies","Basic Ideas of Biology","Human Nutrition","Anatomy &amp; Physiology I &amp; II","2 units of Foreign Language highly recommended","Philosophy, Ethics, Religion, Music, Drama, Foreign Languages, Art","English","Finite Math or Calculus"],["Nutrition &amp; Health","English Composition","Life Sciences (Physiology and Human Biology)","English","General Psychology","Chemistry","Academic Electives","Mathematics","Introduction to Math for Health Professionals","Arts and Humanities and/or Cultural Understanding General Education Course\nFundamentals of Speech"],["Physics","Human Growth and Development\n","Arts and Humanities","Mathematics","Anatomy &amp; Physiology (optional)","College Algebra","Mathematics","Physiology","Math","Fundamentals of Speech"],["Elementary Psychology","Statistics","Historical Analysis/Social Science","Biology or Chemistry","English","Statistics","Anatomy &amp; Physiology I &amp; II","Chemistry","Nutrition","Mathematics"],["Human Development &amp; Behavior","Social Sciences","Writing","Social Studies (US History, Economics, Government, Geography, World Civilization)","Mathematics","Ethics","Psychology",null,"Ethics",null],["Sociology or Contemporary Social Problems","College Algebra","Foreign Languages","Foreign Languages","Biological Science","Microbiology","Art, Music, Creative Expression or Literature",null,"Human Anatomy &amp; Physiology",null],["Literary, Visual and Performing Arts","Arts &amp; Humanities\n","Visual and performing arts","Health","Physical Science","Nutrition","Microbiology",null,null,null],["International Global Issue","Nutrition","math","History and Appreciation of Visual, Performing Arts","US History","Humanities","Statistics",null,null,null],["Values &amp; Culture or Diversity Inclusion",null,null,"Electives","Geography","Culture/Race/Ethnicity/Gender","Introduction to Professional Nursing",null,null,null],["Rhetoric",null,null,null,"Foreign Language","Family/Human Behavior","Introduction to Inclusion Equity, and Diversity in Health care",null,null,null],["Elementary Statistics and Inference",null,null,null,"Visual/performing Arts","Political Science/Social Organization",null,null,null,null],["Health Care Finance",null,null,null,null,"Free Electives",null,null,null,null],["Foreign Language (4 years)",null,null,null,null,null,null,null,null,null],["Algebra/Geometry",null,null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>school<\/th>\n      <th>course01<\/th>\n      <th>course02<\/th>\n      <th>course03<\/th>\n      <th>course04<\/th>\n      <th>course05<\/th>\n      <th>course06<\/th>\n      <th>course07<\/th>\n      <th>course08<\/th>\n      <th>course09<\/th>\n      <th>course10<\/th>\n      <th>course11<\/th>\n      <th>course12<\/th>\n      <th>course13<\/th>\n      <th>course14<\/th>\n      <th>course15<\/th>\n      <th>course16<\/th>\n      <th>course17<\/th>\n      <th>course18<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0}],"order":[],"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Let’s create indicators for different course categories using sets of keywords under each course type. For example, let’s build indicators for:</p>
<ul>
<li>English
<ul>
<li>Writing</li>
<li>Composition</li>
<li>Literature</li>
<li>Critical Thinking</li>
<li>Written Expression</li>
<li>Creative Arts</li>
<li>Communication</li>
<li>Literary</li>
<li>Rhetoric</li>
<li>reading</li>
<li>written communication</li>
</ul></li>
<li>Statistics
<ul>
<li>Quantitative Reasoning</li>
<li>biostatistics</li>
<li>statistics</li>
</ul></li>
<li>Fitness - <em>this does NOT include “nutrition” nor “nutrition for wellness”</em>
<ul>
<li>Health and Fitness</li>
<li>Wellness</li>
<li>Physical Education</li>
</ul></li>
<li>Nutrition - <em>run as a separate category</em>
<ul>
<li>nutrition</li>
<li>nutrition for wellness</li>
</ul></li>
</ul>
<section id="explaining-the-code-below" class="level3">
<h3 class="anchored" data-anchor-id="explaining-the-code-below">Explaining the code below</h3>
<ul>
<li><code>mutate()</code> from <code>dplyr</code> package used to create new variables in dataset</li>
<li><code>if_any()</code> also from <code>dplyr</code> package used to select multiple columns “across” which to “apply” a given function. See <a href="https://dplyr.tidyverse.org/articles/colwise.html">“colwise” vignette for dplyr</a>.</li>
<li><code>.cols =</code> is a list of columns or variables</li>
<li><code>starts_with()</code> is a “helpful” function from <a href="https://tidyselect.r-lib.org/reference/starts_with.html"><code>tidyselect</code> package</a>, loaded with <code>tidyr</code>.</li>
<li><code>.fns =</code> could be any function like <code>mean()</code>, but here I’m using a <code>purrr</code> style <code>~</code> to “map” a function across the columns specified; see more details for <a href="https://dplyr.tidyverse.org/reference/across.html"><code>dplyr::across()</code></a>.</li>
<li><code>str_detect()</code> is from <a href="https://stringr.tidyverse.org/reference/str_detect.html"><code>stringr</code> package</a>.</li>
<li><code>tolower()</code> is a base R function that sets the character string specified to all lowercase letters. The syntax here <code>tolower(.)</code> takes the “strings” coming in from the “course” columns and feeds them <code>.</code> into <code>tolower()</code>.</li>
</ul>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb10" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load stringr for str_detect() function</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># look across all of the columns that start with "course"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># look for the word "english" in any of these columns</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># to avoid capitalization issues, use tolower() function</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">englishYN =</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"english"</span>)))</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># add another course to list</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">writingYN =</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"writing"</span>)))</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>school_courses <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">aa =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(englishYN,writingYN)),</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(school, englishYN, writingYN, aa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code># A tibble: 10 × 4
   school englishYN writingYN    aa
    &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;     &lt;dbl&gt;
 1      1 FALSE     FALSE         0
 2      2 TRUE      NA            1
 3      3 NA        TRUE          1
 4      4 TRUE      NA            1
 5      5 TRUE      TRUE          2
 6      6 TRUE      NA            1
 7      7 TRUE      NA            1
 8      8 TRUE      NA            1
 9      9 TRUE      NA            1
10     10 TRUE      NA            1</code></pre>
</div>
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb12" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create indicator variable for any school</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with either an "english" or "writing" course or both</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">engwrit01 =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(englishYN,writingYN)),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)) </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>school_courses <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(school, englishYN, writingYN, engwrit01)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code># A tibble: 10 × 4
   school englishYN writingYN engwrit01
    &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;         &lt;dbl&gt;
 1      1 FALSE     FALSE             0
 2      2 TRUE      NA                1
 3      3 NA        TRUE              1
 4      4 TRUE      NA                1
 5      5 TRUE      TRUE              1
 6      6 TRUE      NA                1
 7      7 TRUE      NA                1
 8      8 TRUE      NA                1
 9      9 TRUE      NA                1
10     10 TRUE      NA                1</code></pre>
</div>
</div>
<p>Notice that:</p>
<ul>
<li>School 1 has something listed in all 10 course listings and none have the word “english” in them, so you get a value of FALSE or 0.</li>
<li>But School 3 only has data in 12 columns, the last 6 are empty. None of these 12 columns had the word “english” and was also missing data in the last columns which is why you get a value of <code>NA</code>.</li>
<li>And the rest of the schools have at least 1 column with the word “english” in it.</li>
<li>There are similar results for the “writing” courses.</li>
<li>The final column shows a 1 if the school has either “english”, “writing” or both or shows a 0 if they have neither.</li>
</ul>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<strong>WARNING</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p>I should note that when I wrote this code I did not care if there was more than 1 course with a given subject (like English 101 and English 102), I only cared whether the course showed up at least once in the list. You may need to update my code if you care about accounting for columns with missing data.</p>
</div>
</div>
</section>
<section id="rest-of-code-to-parse-rest-of-list-for-english-and-statistics" class="level3">
<h3 class="anchored" data-anchor-id="rest-of-code-to-parse-rest-of-list-for-english-and-statistics">Rest of code to parse rest of list for “English” and “Statistics”</h3>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb14" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create TRUE FALSE for YES/NO for each of these key words</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and phases to look for:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">englishYN =</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"english"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">writingYN =</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"writing"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">compositionYN =</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"composition"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">literatureYN =</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"literature"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">criticalThinkingYN =</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"critical thinking"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">writtenExcourseessionYN =</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"written excourseession"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">creativeArtsYN =</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"creative arts"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">communicationYN =</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"communication"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">literaryYN =</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"literary"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rhetoricYN =</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"rhetoric"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">readingYN =</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"reading"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">writtenCommunicationYN =</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"written communication"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># now add up all the TRUE (as 1) and FALSE (as 0)</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># notice I added na.rm=TRUE so the NAs are ignored</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and I used as.numeric(xxx &gt; 0) to </span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">english01 =</span> <span class="fu">as.numeric</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>      englishYN,</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>      writingYN,</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>      compositionYN,</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>      literatureYN,</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>      criticalThinkingYN,</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>      writtenExcourseessionYN,</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>      creativeArtsYN,</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>      communicationYN,</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>      literaryYN,</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>      rhetoricYN,</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>      readingYN,</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>      writtenCommunicationYN</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">statisticsYN =</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"statistics"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">biostatisticsYN =</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"biostatistics"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">quantitativeYN =</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"quantitative"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">quantitativeReasoningYN =</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"quantitative reasoning"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stat01 =</span> <span class="fu">as.numeric</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(</span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>      statisticsYN,</span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a>      biostatisticsYN,</span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>      quantitativeYN,</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>      quantitativeReasoningYN</span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="what-about-wellness-versus-nutrition-and-wellness" class="level3">
<h3 class="anchored" data-anchor-id="what-about-wellness-versus-nutrition-and-wellness">What about “Wellness” versus “Nutrition and Wellness”?</h3>
<ul>
<li><code>^</code> to match the start of the string</li>
<li><code>(?=.*wellness)</code> the string should start with something with “wellness” in it</li>
<li><code>(?!.*nutrition for wellness)</code> but should NOT have “nutrition for wellness”</li>
</ul>
<p>Some helpful examples:</p>
<ul>
<li><a href="https://epirhandbook.com/en/characters-and-strings.html#regex-and-special-characters">https://epirhandbook.com/en/characters-and-strings.html#regex-and-special-characters</a></li>
<li><a href="https://stackoverflow.com/questions/68868679/pattern-matching-in-r-if-string-not-followed-but-another-string">https://stackoverflow.com/questions/68868679/pattern-matching-in-r-if-string-not-followed-but-another-string</a></li>
</ul>
<p>Also notice I’m including whole phrases and not just 1 word.</p>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb15" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>school_courses <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fitnessYN =</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"fitness"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wellnessYN =</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"^(?=.*wellness)(?!.*nutrition for wellness)"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">physedYN =</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"physical education"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">healthWellnessYN =</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"health and wellness"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fitness01 =</span> <span class="fu">as.numeric</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      fitnessYN,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      wellnessYN,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>      physedYN,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      healthWellnessYN</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nutritionYN =</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"nutrition"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nutritionWellnessYN =</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">starts_with</span>(<span class="st">"course"</span>),</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"nutrition for wellness"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nutrition01 =</span> <span class="fu">as.numeric</span>(<span class="fu">rowSums</span>(<span class="fu">across</span>(</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>      nutritionYN,</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>      nutritionWellnessYN</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">0</span>))</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>coursenames01 <span class="ot">&lt;-</span> school_courses <span class="sc">%&gt;%</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"01"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">contains</span>(<span class="st">"course"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>coursenames <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(coursenames01, <span class="st">"01"</span>)</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>c1 <span class="ot">&lt;-</span> school_courses[, <span class="fu">c</span>(<span class="st">"school"</span>, coursenames01)]</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(c1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"school"</span>, coursenames)</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>c1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code># A tibble: 10 × 6
   school engwrit english  stat fitness nutrition
    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1      1       0       1     1       0         1
 2      2       1       1     1       0         1
 3      3       1       1     1       0         0
 4      4       1       1     0       0         0
 5      5       1       1     0       0         1
 6      6       1       1     1       0         1
 7      7       1       1     1       0         0
 8      8       1       1     0       0         0
 9      9       1       1     0       0         1
10     10       1       1     0       0         0</code></pre>
</div>
</div>
</section>
<section id="table-of-frequencies-of-course-categories" class="level3">
<h3 class="anchored" data-anchor-id="table-of-frequencies-of-course-categories">Table of Frequencies of Course Categories</h3>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb17" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arsenal)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add labels for variables in c1</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>school, <span class="st">'label'</span>)  <span class="ot">&lt;-</span> <span class="st">'School ID'</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>engwrit, <span class="st">'label'</span>)  <span class="ot">&lt;-</span> <span class="st">'English or Writing'</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>english, <span class="st">'label'</span>)  <span class="ot">&lt;-</span> <span class="st">'English'</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>stat, <span class="st">'label'</span>)  <span class="ot">&lt;-</span> <span class="st">'Statistics'</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>fitness, <span class="st">'label'</span>)  <span class="ot">&lt;-</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Health, Fitness, Wellness &amp; Physical Education'</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(c1<span class="sc">$</span>nutrition, <span class="st">'label'</span>)  <span class="ot">&lt;-</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Nutrition (including Nutrition and Wellness)'</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># create a function to make 0/1 into "no"/"yes" factor</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># set 0=no, 1=yes and make as factor</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>factoryn <span class="ot">&lt;-</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(.x) {</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">factor</span>(.x,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">level =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">label =</span> <span class="fu">c</span>(<span class="st">"no"</span>, <span class="st">"yes"</span>)))</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># use purrr package to map this function</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co"># across all of the 0/1 variables</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co"># to turn them into "no"/"yes" factor type</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>c1yn <span class="ot">&lt;-</span> c1 <span class="sc">%&gt;%</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(coursenames)) <span class="sc">%&gt;%</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(factoryn) <span class="sc">%&gt;%</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>()</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableby</span>( <span class="sc">~</span> .,</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">numeric.stats =</span> <span class="fu">c</span>(<span class="st">"median"</span>, <span class="st">"q1q3"</span>, <span class="st">"range"</span>, <span class="st">"Nmiss"</span>),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> c1yn)</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  tab1,</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">test =</span> <span class="cn">FALSE</span>,</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">pfootnote =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits =</span> <span class="dv">1</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits.pct =</span> <span class="dv">1</span>,</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Course Frequencies for 10 Schools"</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<table class="table table-sm table-striped">
<caption>Course Frequencies for 10 Schools</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">Overall (N=10)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>engwrit</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;no</td>
<td style="text-align: center;">1 (10.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;yes</td>
<td style="text-align: center;">9 (90.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>english</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;no</td>
<td style="text-align: center;">0 (0.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;yes</td>
<td style="text-align: center;">10 (100.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>stat</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;no</td>
<td style="text-align: center;">5 (50.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;yes</td>
<td style="text-align: center;">5 (50.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>fitness</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;no</td>
<td style="text-align: center;">10 (100.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;yes</td>
<td style="text-align: center;">0 (0.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>nutrition</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;no</td>
<td style="text-align: center;">5 (50.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;&nbsp;&nbsp;yes</td>
<td style="text-align: center;">5 (50.0%)</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="example-2-parsing-a-list-of-medications-into-treatment-classes" class="level2">
<h2 class="anchored" data-anchor-id="example-2-parsing-a-list-of-medications-into-treatment-classes">Example 2: Parsing a list of medications into treatment classes</h2>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb18" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># medications example to go here</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import dataset</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"medications.xlsx"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create list of variables for medications ======================</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>medlist1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"medication1"</span>, <span class="st">"medication2"</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">"medication3"</span>, <span class="st">"medication4"</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">"medication5"</span>, <span class="st">"medication6"</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">"medication7"</span>, <span class="st">"medication8"</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">"medication9"</span>, <span class="st">"medication10"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># look for all of these medications for HTN treatments:</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># amlodipine</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co"># atenolol</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co"># benazepril</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co"># benicur</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># benzaepril</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># bisoprolol</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co"># carveldilol</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># chlorthalidone</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co"># clonidine</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co"># dyazide</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co"># exforge</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co"># furosemide</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># furosimide</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co"># hctz</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co"># labetalol</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co"># lisinopril</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="co"># losartan</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co"># maxzide</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="co"># metoprolol</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co"># nadolol</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="co"># nebivolol</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="co"># nifedipine</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="co"># olmesartan</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co"># water pill</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="co"># prazosin</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="co"># primivil</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="co"># telmisartan</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a><span class="co"># timerol</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a><span class="co"># triamterene</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a><span class="co"># triamterine</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co"># triamterinel</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="co"># valsartan</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> medications <span class="sc">%&gt;%</span></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">htn01 =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"amlodipine"</span>))) <span class="sc">|</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"atenolol"</span>))) <span class="sc">|</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"benazepril"</span>))) <span class="sc">|</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"benicur"</span>))) <span class="sc">|</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"benzaepril"</span>))) <span class="sc">|</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"bisoprolol"</span>))) <span class="sc">|</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"carveldilol"</span>))) <span class="sc">|</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"chlorthalidone"</span>))) <span class="sc">|</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"clonidine"</span>))) <span class="sc">|</span></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"dyazide"</span>))) <span class="sc">|</span></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"exforge"</span>))) <span class="sc">|</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"furosemide"</span>))) <span class="sc">|</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"furosimide"</span>))) <span class="sc">|</span></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"hctz"</span>))) <span class="sc">|</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"hydrochlor"</span>))) <span class="sc">|</span></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"labetalol"</span>))) <span class="sc">|</span></span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"lisinopril"</span>))) <span class="sc">|</span></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"losartan"</span>))) <span class="sc">|</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"maxzide"</span>))) <span class="sc">|</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"metoprolol"</span>))) <span class="sc">|</span></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"nadolol"</span>))) <span class="sc">|</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"nebivolol"</span>))) <span class="sc">|</span></span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"nifedipine"</span>))) <span class="sc">|</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"olmesartan"</span>))) <span class="sc">|</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"water pill"</span>))) <span class="sc">|</span></span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"prazosin"</span>))) <span class="sc">|</span></span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"primivil"</span>))) <span class="sc">|</span></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"telmisartan"</span>))) <span class="sc">|</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"timerol"</span>))) <span class="sc">|</span></span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"triamterene"</span>))) <span class="sc">|</span></span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"triamterine"</span>))) <span class="sc">|</span></span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"triamterinel"</span>))) <span class="sc">|</span></span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1,<span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"valsartan"</span>)))</span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>    )) </span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="co"># look for all of these medications for Diabetes treatments:</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a><span class="co"># glipizide</span></span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a><span class="co"># glyburide</span></span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a><span class="co"># humalog</span></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a><span class="co"># insulin</span></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a><span class="co"># lantis</span></span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a><span class="co"># linaglipten</span></span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a><span class="co"># lumulin</span></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a><span class="co"># metformin</span></span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a><span class="co"># novolog</span></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a><span class="co"># piogli</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a><span class="co"># proglit</span></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a><span class="co"># saxaglipitin</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> medications <span class="sc">%&gt;%</span></span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diab01 =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"glipizide"</span>))) <span class="sc">|</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"glyburide"</span>))) <span class="sc">|</span></span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"humalog"</span>))) <span class="sc">|</span></span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"insulin"</span>))) <span class="sc">|</span></span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"lantis"</span>))) <span class="sc">|</span></span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"linaglipten"</span>))) <span class="sc">|</span></span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"lumulin"</span>))) <span class="sc">|</span></span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"metformin"</span>))) <span class="sc">|</span></span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"novolog"</span>))) <span class="sc">|</span></span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"piogli"</span>))) <span class="sc">|</span></span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"proglit"</span>))) <span class="sc">|</span></span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"saxaglipitin"</span>)))</span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a>    )) </span>
<span id="cb18-113"><a href="#cb18-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-114"><a href="#cb18-114" aria-hidden="true" tabindex="-1"></a><span class="co"># look for all of these medications for Cholesterol treatments:</span></span>
<span id="cb18-115"><a href="#cb18-115" aria-hidden="true" tabindex="-1"></a><span class="co"># cholest</span></span>
<span id="cb18-116"><a href="#cb18-116" aria-hidden="true" tabindex="-1"></a><span class="co"># fenofibrate</span></span>
<span id="cb18-117"><a href="#cb18-117" aria-hidden="true" tabindex="-1"></a><span class="co"># simvastatin</span></span>
<span id="cb18-118"><a href="#cb18-118" aria-hidden="true" tabindex="-1"></a><span class="co"># vytorin</span></span>
<span id="cb18-119"><a href="#cb18-119" aria-hidden="true" tabindex="-1"></a><span class="co"># zetia</span></span>
<span id="cb18-120"><a href="#cb18-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-121"><a href="#cb18-121" aria-hidden="true" tabindex="-1"></a>medications <span class="ot">&lt;-</span> medications <span class="sc">%&gt;%</span></span>
<span id="cb18-122"><a href="#cb18-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cholesterol01 =</span> <span class="fu">as.numeric</span>(</span>
<span id="cb18-123"><a href="#cb18-123" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"cholest"</span>))) <span class="sc">|</span></span>
<span id="cb18-124"><a href="#cb18-124" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"fenofibrate"</span>))) <span class="sc">|</span></span>
<span id="cb18-125"><a href="#cb18-125" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"simvastatin"</span>))) <span class="sc">|</span></span>
<span id="cb18-126"><a href="#cb18-126" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"vytorin"</span>))) <span class="sc">|</span></span>
<span id="cb18-127"><a href="#cb18-127" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">if_any</span>(<span class="at">.cols =</span> medlist1, <span class="sc">~</span> <span class="fu">str_detect</span>(<span class="fu">tolower</span>(.), <span class="st">"zetia"</span>)))</span>
<span id="cb18-128"><a href="#cb18-128" aria-hidden="true" tabindex="-1"></a>    )) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="look-at-results---who-is-on-these-3-medications" class="level3">
<h3 class="anchored" data-anchor-id="look-at-results---who-is-on-these-3-medications">Look at results - who is on these 3 medications:</h3>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb19" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>medications <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, htn01, diab01, cholesterol01) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(., <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-2a51debbb2d752014755" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2a51debbb2d752014755">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97"],[1,2,3,4,5,8,9,11,12,13,16,19,21,22,23,24,25,27,29,30,31,32,33,35,36,37,38,39,40,41,45,47,48,51,52,53,54,55,56,57,58,60,62,63,65,69,71,72,73,74,75,76,77,78,80,82,84,85,88,89,90,93,94,95,98,100,101,102,103,104,105,106,107,108,110,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134],[null,null,null,null,null,null,1,null,null,null,null,null,null,null,1,1,null,null,null,1,1,null,null,null,1,1,1,null,1,1,1,1,null,1,1,null,1,1,null,null,1,1,null,1,null,1,1,1,1,1,1,null,null,null,null,1,1,null,1,null,null,1,1,null,1,null,1,1,null,null,null,0,1,1,1,1,null,1,null,null,null,null,1,1,null,1,1,1,1,1,null,1,null,1,null,1,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,null,1,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,1,null,null,1,1,null,null,1,null,null,null,null,null,null,0,null,null,1,null,null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>htn01<\/th>\n      <th>diab01<\/th>\n      <th>cholesterol01<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":20,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="pull-a-list-of-subject-ids-on-certain-medications-or-combinations-of-meds" class="level3">
<h3 class="anchored" data-anchor-id="pull-a-list-of-subject-ids-on-certain-medications-or-combinations-of-meds">Pull a list of subject IDs on certain medications or combinations of meds</h3>
<div class="cell" data-fig.showtext="true">
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb20" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list of subjects on HTN medications</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>medications <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(htn01 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code> [1]   9  23  24  30  31  36  37  38  40  41  45  47  51  52  54  55  58  60  63
[20]  69  71  72  73  74  75  82  84  88  93  94  98 101 102 107 108 110 113 115
[39] 120 121 123 124 125 126 127 129 131 133</code></pre>
</div>
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb22" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list of subjects on Diabetes medications</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>medications <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diab01 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code> [1]  27  35  47  48  74  84  85  90  93  98 110 116 127</code></pre>
</div>
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb24" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list of subjects on HTN and Diabetes medications</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>medications <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(htn01 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> diab01 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code>[1]  47  74  84  93  98 110 127</code></pre>
</div>
<details open="">
<summary>Show/Hide Code</summary>
<div class="sourceCode cell-code" id="cb26" style="padding-right: 10px;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list of subjects on Cholesterol medications</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>medications <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cholesterol01 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre style="background: #bfe0c8;"><code>[1] 129</code></pre>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="additional-resources" class="level1">
<h1>Additional Resources:</h1>
<ul>
<li><code>tidyr</code> - learn more at: <a href="https://tidyr.tidyverse.org/">https://tidyr.tidyverse.org/</a></li>
<li><code>stringr</code> - learn more at:
<ul>
<li><a href="https://stringr.tidyverse.org/">https://stringr.tidyverse.org/</a></li>
<li><a href="https://r4ds.had.co.nz/strings.html">https://r4ds.had.co.nz/strings.html</a></li>
</ul></li>
<li><code>stringi</code> - learn more at:
<ul>
<li><a href="https://cran.r-project.org/web/packages/stringi/index.html">https://cran.r-project.org/web/packages/stringi/index.html</a></li>
<li><a href="https://r4ds.had.co.nz/strings.html#stringi">https://r4ds.had.co.nz/strings.html#stringi</a></li>
</ul></li>
<li>BOOK: <a href="https://www.tidytextmining.com/">Text Mining with R</a></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>